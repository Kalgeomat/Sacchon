<div class="container">
    <div class="row">
        <h3>View Data</h3>
    </div>
    <div class="row">
        
        <div class="col-md-4">
            
            <app-period-form></app-period-form>

            <p>Average Daily Glucose: </p>
            <!-- TODO show average daily glucose in that period -->

            
                <h4>Blood Level Glucose Inputs</h4>
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Level</th>
                        <th scope="col">Date</th>
                        <th scope="col">Time</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let g of glucoses">
                          <td>{{g.bloodGlucoseLevel}}</td> 
                          <td>{{ g.dateMeasured | date }}</td>  
                          <td>{{ g.dateMeasured | date:'shortTime'}}</td>
                          <td>
                            <span>
                              <button *ngIf="!enableEdit" type="button" class="btn-sm btn-primary" (click)="onEditClick($event, i)">Edit</button>
                              <button *ngIf="!enableEdit" type="button" class="btn-sm btn-danger" (click)="onDeleteClick()">Delete</button>
                              <button *ngIf="enableEdit && enableEditIndex == i" (click)="enableEdit=false" class="btn-sm page-secondary-action-btn" ng-click="cancel()">Cancel</button>
                              <button *ngIf="enableEdit && enableEditIndex == i" id="saveBtn" class="btn-sm page-primary-action-btn" (click)="saveConsult()" type="submit">Save</button>
                            </span>
                          </td>                                  
                        </tr>                   
                      </tbody>
                  </table>
                <!--TODO show patients all glucose inputs-->
            <!-- TODO add edit and delete buttons -->
                
            
            

        </div>
        <div class="col-md-4">
            
            <app-period-form></app-period-form>
            <p>Average Carb Intake: </p>
            <!-- TODO show average Carb Intake in that period -->

            
                <h4>Carb Intake Inputs</h4>
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Carb Intake</th>
                        <th scope="col">Date</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let c of carbs">
                        <td>{{c.carbInTake}}</td> 
                        <td>{{ c.dateMeasured | date }}</td>  
                        <td>
                          <span>
                            <button *ngIf="!enableEdit" type="button" class="btn-sm btn-primary" (click)="onEditClick($event, i)">Edit</button>
                            <button *ngIf="!enableEdit" type="button" class="btn-sm btn-danger" (click)="onDeleteClick()">Delete</button>
                            <button *ngIf="enableEdit && enableEditIndex == i" (click)="enableEdit=false" class="btn-sm page-secondary-action-btn" ng-click="cancel()">Cancel</button>
                            <button *ngIf="enableEdit && enableEditIndex == i" id="saveBtn" class="btn-sm page-primary-action-btn" (click)="saveConsult()" type="submit">Save</button>
                          </span>
                        </td>                                 
                      </tr>                   
                    </tbody>
                  </table>
                <!--TODO show patients alla carb inputs-->
            <!-- TODO add edit and delete buttons -->          

        </div>
        <div class="col-md-4">
          <h4>Past Consultations</h4>
          <table class="table" *ngIf="consults?.length">
            <thead>
              <tr>
                <th scope="col">Consultation</th>
                <th scope="col">Doctor</th>
                <th scope="col">Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let con of consults">                
                <td> {{con.description}} </td> 
                
                <!-- <td>Dr {{doctor.firstName}} {{doctor.lastName}}</td>   -->
                <!-- TODO uncomment when back sends it in right format -->

                <td>{{ con.dateCreated | date }}</td>        
              </tr>                 
            </tbody>
          </table>
        </div>
    </div>
</div>